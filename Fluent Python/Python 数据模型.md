> Guido 对语言设计美学的深入理解让人震惊。我认识不少很不错的编程语言设计者，他们设计出来的东西确实很精彩，但是从来都不会有用户。Guido 知道如何在理论上做出一定的妥协，设计出来的语言让使用者觉得如沐春风，这真是不可多得。				
>
> ​																			—— Jim Hugunin
>
> ​											Jython 的作者，AspectJ 的作者之一， .NET DLR 架构师

#### 一、如何理解数据模型？

最近我在阅读一本专门讲述 Python 语言特性的书（本文部分内容来自 **Fluent Python** 这本书），书中提到了**数据模型**这个词，数据模型是不是我们经常说的数据类型？其实不是，数据模型是对 Python 框架的描述，他规范了自身构建模块的接口，这些接口我们可以理解为是 Python 中的特殊方法，例如 `__iter__`、`__len__`、`__del__` 等。这些模块包括但不限于序列、迭代器、函数、类和上下文管理器。假如我们在讨论，拥有哪些方法和属性的对象可以称为序列，实际上我们就是在讨论序列的数据模型。

**Python 最好的品质之一是一致性，当你使用 Python 一段时间以后，你就会开始理解 Python 语言，并且能正确的猜出对你来说是全新的语言特性。**

 如果你带着其他编程语言的经历来使用 Python ，你可能会为 `len(object) ` 而不是 `object.len()` 而感到好奇，在 `Java` 语言中常常使用 `object.len()` 这种方法取得对象的长度。**当你进一步的理解这种不适感背后的强大之处的时候，你会被 Python 的设计哲学所折服，这正是建立在 Python 数据模型之上的结果，Python 数据模型的 API ，为我们使用地道的 Python 特性构建对象提供了工具，这正是我们常常说的 `Pythonic`。**

不管在哪种框架下写程序，都会花费大量的时间区实现那些会被框架本身调用的方法，Python 框架本身也不例外。当你在使用 `object[item]` 的时候，背后实际上是调用了 `object.__getitem__` 这个方法。这样的好处的是什么，这样我们就可以对自建的对象使用 `[]` 运算符，我们只需要在类当中定义 `__getitem__` 方法即可。

`__getitem__` 是 Python 的特殊方法之一，常见的特殊方法还有 `__len__`、`__iter__`、`__enter__`、`__call__` 等

这些特殊方法，能让你自己的对象实现和支持以下的语言架构，并与之交互。

- 迭代
- 集合类
- 属性访问
- 运算符重载
- 函数和方法的调用
- 对象的创建和销毁
- 字符串表示形式和格式化
- 上下文管理器

#### 二、实现自己的序列类

数据模型提供了使用 Python 语言特性的来构建对象的 API ，那么我们尝试着实现自己的序列类。

```python
# @Author   : stefanlei
# @File     : app.py


class MyList(object):
    
    def __init__(self, ):
        self.items = [x for x in range(10)]
        self.len = 10

    def __getitem__(self, item):
        return self.items[item]

    def __len__(self):
        return self.len


a = MyList()

for x in a:
    print(x)
print('第一个元素', a[0])
print("长度:", len(a))

```

我们自己定义的类支持迭代，支持